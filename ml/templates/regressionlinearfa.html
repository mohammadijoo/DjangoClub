{% extends "portfolio/base-2.html" %}

{% block cssStyle %}  
.lighttag {
  color: #e8f9fd !important;
}
{% endblock %}
{% block content %}
<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" style="direction:rtl !important; float:right; font-family: 'Sahel';">
    <div class="modal-dialog" role="document">
        <div class="modal-content" >
            <div class="modal-header" style="direction:rtl !important; float:right">
                <h5 class="modal-title" id="exampleModalLabel" style="color:black; direction:rtl !important; float:right !important; font-family: 'Sahel'; text-align:justify;">  نتایج پیش بینی:  </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="direction:rtl !important; float:right; text-align:justify;">   
                <h5 style="color:black; direction:rtl !important; float:right !important; font-family: 'Sahel'; text-align:justify;">  ورودی های طبقه بندی:  </h5><br><br>
                <div style="color:black; direction:rtl !important; float:right !important; text-align:justify;">مساحت به فوت مربع: <span id="sq" style="color:black;"></span></div><br>
                <div style="color:black; direction:rtl !important; float:right !important; text-align:justify;"> تعداد اتاق خواب: <span id="be" style="color:black;"></span></div><br>
                <div style="color:black; direction:rtl !important; float:right !important; text-align:justify;"> تعداد سرویس بهداشتی: <span id="ba" style="color:black;"></span></div><br>
                <div style="color:black; direction:rtl !important; float:right !important; text-align:justify;"> تعداد پیشنهادها:  <span id="of" style="color:black;"></span></div><br>
                <div style="color:black; direction:rtl !important; float:right !important; text-align:justify;"> آجری بودن: <span id="br" style="color:black;"></span></div><br>
                <div style="color:black; direction:rtl !important; float:right !important; text-align:justify;"> منطقه همسایگی: <span id="ne" style="color:black;"></span></div><br>
                <h5 class="pt-3"> نتیجه پیش بینی قیمت خانه: </h5>
                <div id="prediction" style="color:black;"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">بستن</button>
                <a class="btn btn-primary" href="{% url 'ml:regressionresultlinearfa' %}" role="button">مشاهده نتایج قبلی</a>
            </div>
        </div>
    </div>
</div>

<!--<h1 ></h1>-->

<div class="container pt-3" style="direction:rtl !important; font-family: 'Sahel', 'BTraffic' !important;">
    <div class="row justify-content-md-center">
        <div class="col-md-12 ustify-content-md-center text-center">
            
            <span style="font-size:1.5rem; font-weight:600; " class="m-2 ">
                <a href="{% url 'ml:regressionresultlinearfa' %}" target="_blank" style="border-bottom: 1px solid #ffb766;" class="lighttag"> 
                     نتایج </a>
            </span> 
            
            <span style="font-size:1.5rem; font-weight:600; " class="m-2">
                <a href="https://github.com/mohammadijoo/Datasets/blob/main/house-prices.py" target="_blank" style="border-bottom: 1px solid #ffb766;" class="lighttag"> 
                    کد نمونه </a>
            </span>
            
            <span style="font-size:1.5rem; font-weight:600; " class="m-2">
                <a href="https://github.com/mohammadijoo/Datasets/blob/main/house-prices.csv" target="_blank" style="border-bottom: 1px solid #ffb766;" class="lighttag"> 
                    دیتاست </a>
            </span> <br>
            
        </div>
        
        <div class="col-md-2"></div>
        <div class="col-md-8">
            
            <h1 style="font-family: 'Sahel', 'Caveat Brush', cursive; color:#A28089; font-size:3rem" class="text-center mt-4 mb-1">
                پیش بینی قیمت خانه
            </h1>
            <h1 style="font-family: 'Sahel', 'Caveat Brush', cursive; color:#A28089; font-size:2rem" class="text-center mb-4">
                با استفاده از مدل <u>Linear Regression</u> 
            </h1>
            <h6 style="color: #00ABE4; font-size:0.8rem;" class="text-center mb-2">
                پس از تکمیل و ارسال فرم، حداقل 10 ثانیه صبر کنید تا مدل نتایج را محاسبه نموده و نمایش دهد. 
            </h6>
            <form action="" id="post-form">
                {% csrf_token %}
                <div class="form-group"> 
                    <label for="SqFt" style="direction:rtl !important; text-align:justify; float:right">مساحت خانه  <small class="pr-4" style="color:#BFA181;">  (بین 1400 و 2600 فوت مربع)  </small> </label>
                    <input type="number" step="1" class="form-control" id="SqFt" placeholder="" required>
                </div>
                <div class="form-group">
                    <label for="Bedrooms" style="direction:rtl !important; text-align:justify; float:right">تعداد اتاق خواب <small class="pr-4" style="color:#BFA181;">  (بین 2 و 5) </small> </label>
                    <input type="number" step="1" class="form-control" id="Bedrooms" placeholder="" required>
                </div>
                <div class="form-group">
                    <label for="Bathrooms" style="direction:rtl !important; text-align:justify; float:right">  تعداد سرویس بهداشتی <small class="pr-4" style="color:#BFA181;">  (بین 2 و 4)  </small> </label>
                    <input type="number" step="1" class="form-control" id="Bathrooms" placeholder="" required>
                </div>
                <div class="form-group">
                    <label for="Offers" style="direction:rtl !important; text-align:justify; float:right"> تعداد پیشنهادها <small class="pr-4" style="color:#BFA181;">  (بین 1 و 6) </small> </label>
                    <input type="number" step="1" class="form-control" id="Offers" placeholder="" required>
                </div>
                <div class="form-group">
                    <label for="Brick" style="direction:rtl !important; text-align:justify; float:right">  آجری بودن <small class="pr-4" style="color:#BFA181;">(0 &#8594; خیر , 1 &#8594; بله)</small> </label>
                    <select name="Brick" id="Brick" form="post-form" class="form-control" required>
                      <option value="1">1</option>
                      <option value="0">0</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="Neighborhood" style="direction:rtl !important; text-align:justify; float:right">ناحیه همسایگی  <small class="pr-4" style="color:#BFA181;">(0 &#8594; شرق , 1 &#8594; شمال , 2 &#8594; غرب)</small> </label>
                    <select name="Neighborhood" id="Neighborhood" form="post-form" class="form-control" required>
                      <option value="0">0</option>
                      <option value="1">1</option>
                      <option value="2">2</option>
                    </select>
                </div>
                <button type="submit" value="Submit" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">ارسال</button>
            </form>
        </div>
        <div class="col-md-2"></div>
        
        
        <div class="col-md-12 mt-5">
            
            <h1 style="font-family: 'Sahel', 'Caveat Brush', cursive; color:#99775C; font-size:2.5rem" class="text-justify mt-4 mb-1">
                توضیحات مدل:
            </h1>
            
            <p style="font-size:1.3rem" class="text-justify">
                
                رگرسیون یک روش یادگیری ماشینی نظارت شده برای درک رابطه بین متغیرها یا ویژگی های مستقل و یک متغیر یا نتیجه وابسته است. یکی از الگوریتم‌هایی که برای رگرسیون استفاده می‌شود، <a href="https://en.wikipedia.org/wiki/Linear_regression" target="_blank">“رگرسیون خطی”</a> است. <br>
                در اینجا، ما از دیتاست <b style="color:#6E6E6E"><u>house-prices.csv</u></b>  برای اهداف رگرسیونی استفاده می کنیم و می توانید این دیتاست را از لینک بالای این صفحه دانلود کنید. این دیتاست دارای 6 متغیر ویژگی است: <br>
                “<i style="color:#6ACFC7">تعداد اتاق خواب</i>”, “<i style="color:#6ACFC7">تعداد سرویس بهداشتی</i>”, “<i style="color:#6ACFC7">مساحت خانه (SqFt)</i>”, “<i style="color:#6ACFC7">تعداد پیشنهادها</i>”, “<i style="color:#6ACFC7">آجری بودن</i>” و “<i style="color:#6ACFC7">منطقه همسایگی</i>” <br>
                و متغیر پیش بینی برابر است با: “<i style="color:#6ACFC7">قیمت خانه</i>”.  <br>
                در فرم بالا مقادیر 6 متغیر ویژگی را وارد می کنید و مدل در یک فرم پاپ آپ قیمت خانه را برمی گرداند. از آنجایی که 2 متغیر ویژگی از دیتاست ما متنی و 4 مورد از آنها عددی است، برای استفاده از رگرسیون خطی برای این دیتاست ترکیبی، باید متغیرهای ویژگی متنی را به برچسب های عددی تبدیل کنیم و سپس می توانیم از روش رگرسیون خطی استفاده کنیم.  <br>
                توجه داشته باشید که مقادیر و محدوده های هر متغیر ویژگی به شرح زیر است: <br>
                
            </p>
            
                <h5 class="text-right mt-2" style="line-height:2rem"> 
                <mark class="mt-1 p-1" style="direction:rtl; font-family: 'Sahel', 'BTeraffic'; text-align:right;">    مساحت خانه (بین 1400 و 2600 فوت مربع)    </mark>       
                </h5>
                <h5 class="text-right mt-2" style="line-height:2rem"> 
                <mark class="mt-1 p-1" style="direction:rtl; font-family: 'Sahel', 'BTeraffic'; text-align:right;">    تعداد اتاق خواب (بین 2 و 5)    </mark> 
                </h5>
                <h5 class="text-right mt-2" style="line-height:2rem">
                <mark class="mt-1 p-1" style="direction:rtl; font-family: 'Sahel', 'BTeraffic'; text-align:right;">   تعداد سرویس بهداشتی (بین 2 و 4)       </mark> 
                </h5>
                <h5 class="text-right mt-2" style="line-height:2rem">
                <mark class="mt-1 p-1" style="direction:rtl; font-family: 'Sahel', 'BTeraffic'; text-align:right;">   تعداد پیشنهادها (بین 1 و 6)         </mark>  
                </h5>
                <h5 class="text-right mt-2" style="line-height:2rem">
                <mark class="mt-1 p-1" style="direction:rtl; font-family: 'Sahel', 'BTeraffic'; text-align:right;"> آجری بودن → 0 (خیر) یا 1 (بله)  </mark>  
                </h5>
                <h5 class="text-right mt-2" style="line-height:2rem">
                <mark class="mt-1 p-1" style="direction:rtl; font-family: 'Sahel', 'BTeraffic'; text-align:right;"> ناحیه همسایگی → 0 (شرق) یا 1 (شمال) یا 2 (غرب)  </mark>  
                </h5>
                
			<p style="font-size:1.3rem" class="text-justify">	
				
                کد نمونه مورد استفاده برای آموزش مدل رگرسیون خطی در لینک بالای همین صفحه ارائه شده است. هر بار که این فرم را اجرا می کنید و پیش بینی ها اتفاق می افتد، مقادیر در پایگاه داده ذخیره می شوند و با لینک "نتایج" در بالای این صفحه، نتایج قبلی پیش بینی مدل را مشاهده خواهید کرد. اجرای اخیر شما به انتهای این لیست اضافه خواهد شد.
            
            </p>
            
        </div>
        
        
    </div>
</div>

<script>    
    $(document).on('submit', '#post-form',function(e){
        e.preventDefault();
        $.ajax({
            type:'POST',
            url:'{% url "ml:submit_regression_linear" %}',
            data:{
                SqFt:$('#SqFt').val(),
                Bedrooms:$('#Bedrooms').val(),
                Bathrooms:$('#Bathrooms').val(),
                Offers:$('#Offers').val(),
                Brick:$('#Brick').val(),
                Neighborhood:$('#Neighborhood').val(),
                csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
                action: 'post'
            },
            success:function(json) {
                document.forms["post-form"].reset();
                document.getElementById("prediction").innerHTML = json['result']
                document.getElementById("sq").innerHTML = json['SqFt']
                document.getElementById("be").innerHTML = json['Bedrooms']
                document.getElementById("ba").innerHTML = json['Bathrooms']
                document.getElementById("of").innerHTML = json['Offers']
                document.getElementById("br").innerHTML = json['Brick']
                document.getElementById("ne").innerHTML = json['Neighborhood']
            },
            error : function(xhr,errmsg,err) {

            }
        });
    })
</script>

{% endblock %}

