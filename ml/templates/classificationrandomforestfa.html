{% extends "portfolio/base-2.html" %}

{% block cssStyle %}  
.lighttag {
  color: #e8f9fd !important;
}
{% endblock %}
{% block content %}
<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" style="direction:rtl !important; float:right; font-family: 'Sahel';">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header" style="direction:rtl !important; float:right">
                <h5 class="modal-title" id="exampleModalLabel" style="color:black; direction:rtl !important; float:right !important; font-family: 'Sahel'; text-align:justify;">  نتایج پیش بینی:  </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="direction:rtl !important; float:right; text-align:justify;">    
                <h5 style="color:black; direction:rtl !important; float:right !important; font-family: 'Sahel'; text-align:justify;">  ورودی های طبقه بندی:  </h5><br><br>
                <div style="color:black; direction:rtl !important; float:right !important; text-align:justify;">RI: <span id="RI1" style="color:black;"></span></div><br>
                <div style="color:black; direction:rtl !important; float:right !important; text-align:justify;">Na: <span id="Na1" style="color:black;"></span></div><br>
                <div style="color:black; direction:rtl !important; float:right !important; text-align:justify;">Mg: <span id="Mg1" style="color:black;"></span></div><br>
                <div style="color:black; direction:rtl !important; float:right !important; text-align:justify;">Al: <span id="Al1" style="color:black;"></span></div><br>
                <div style="color:black; direction:rtl !important; float:right !important; text-align:justify;">Si: <span id="Si1" style="color:black;"></span></div><br>
                <div style="color:black; direction:rtl !important; float:right !important; text-align:justify;">K: <span id="K1" style="color:black;"></span></div><br>
                <div style="color:black; direction:rtl !important; float:right !important; text-align:justify;">Ca: <span id="Ca1" style="color:black;"></span></div><br>
                <div style="color:black; direction:rtl !important; float:right !important; text-align:justify;">Ba: <span id="Ba1" style="color:black;"></span></div><br>
                <div style="color:black; direction:rtl !important; float:right !important; text-align:justify;">Fe: <span id="Fe1" style="color:black;"></span></div><br>
                <h5 class="pt-3" style="color:black; direction:rtl !important; float:right !important; font-family: 'Sahel'; text-align:justify;">   نتیجه پیش بینی نوع شیشه: </h5>  <br>
                <div id="prediction" style="color:black;"></div>
            </div>
            <div class="modal-footer" style="direction:rtl !important; float:right">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">بستن</button>
                <a class="btn btn-primary" href="{% url 'ml:classificationresultrffa' %}" role="button">  مشاهده نتایج قبلی  </a>
            </div>
        </div>
    </div>
</div>

<!--<h1 ></h1>-->

<div class="container pt-3" style="direction:rtl !important; font-family: 'Sahel', 'BTraffic' !important;">
    <div class="row justify-content-md-center">
        <div class="col-md-12 ustify-content-md-center text-center">
            
            <span style="font-size:1.5rem; font-weight:600; " class="m-2 ">
                <a href="{% url 'ml:classificationresultrffa' %}" target="_blank" style="border-bottom: 1px solid #ffb766;" class="lighttag"> 
                    نتایج</a>
            </span> 
            
            <span style="font-size:1.5rem; font-weight:600; " class="m-2">
                <a href="https://github.com/mohammadijoo/Datasets/blob/main/glass.py" target="_blank" style="border-bottom: 1px solid #ffb766;" class="lighttag"> 
                     کد نمونه </a>
            </span>
            
            <span style="font-size:1.5rem; font-weight:600; " class="m-2">
                <a href="https://github.com/mohammadijoo/Datasets/blob/main/glass.csv" target="_blank" style="border-bottom: 1px solid #ffb766;" class="lighttag"> 
                    دیتاست  </a>
            </span> <br>
            
        </div>
        
        <div class="col-md-2"></div>
        <div class="col-md-8">
            
            <h1 style="font-family: 'Sahel', 'Caveat Brush', cursive; color:#A28089; font-size:3rem" class="text-center mt-4 mb-1">
                طبقه بندی انواع شیشه
            </h1>
            <h1 style="font-family: 'Sahel', 'Caveat Brush', cursive; color:#A28089; font-size:2rem" class="text-center mb-4">
                با استفاده از مدل <u>Random Forest</u>  
            </h1>
            <h6 style="color: #00ABE4; font-size:0.8rem;" class="text-center mb-2">
                پس از تکمیل و ارسال فرم، حداقل 10 ثانیه صبر کنید تا مدل نتایج را محاسبه نموده و نمایش دهد. <br> همچنین، تمام اعداد اعشاری وارد شده باید حداکثر 2 رقم اعشار داشته باشند، مانند: 1.23
            </h6>
            <form action="" id="post-form" style="direction:rtl !important; font-family: 'Sahel', 'BTraffic' !important;">  
                {% csrf_token %}
                <div class="form-group"> 
                    <label for="RI" style="direction:rtl !important; text-align:justify; float:right">RI: شاخص انعکاسی <small class="pr-4" style="color:#BFA181;">  (بین 1.51 و 1.53) </small> </label>
                    <input type="number" step="0.01" class="form-control" id="RI" placeholder="" required>
                </div>
                <div class="form-group">
                    <label for="Na" style="direction:rtl !important; text-align:justify; float:right">Na: سدیم  <small class="pr-4" style="color:#BFA181;">   (بین 10.73 و 17.38)     </small> </label>
                    <input type="number" step="0.01" class="form-control" id="Na" placeholder="" required>
                </div>
                <div class="form-group">
                    <label for="Mg" style="direction:rtl !important; text-align:justify; float:right">Mg: منیزیم <small class="pr-4" style="color:#BFA181;">   (بین 0 و 4.49)    </small> </label>
                    <input type="number" step="0.01" class="form-control" id="Mg" placeholder="" required>
                </div>
                <div class="form-group">
                    <label for="Al" style="direction:rtl !important; text-align:justify; float:right">Al: آلومینیوم <small class="pr-4" style="color:#BFA181;">   (بین 0.29 و 3.5)     </small> </label>
                    <input type="number" step="0.01" class="form-control" id="Al" placeholder="" required>
                </div>
                <div class="form-group">
                    <label for="Si" style="direction:rtl !important; text-align:justify; float:right">Si: سیلیسیوم <small class="pr-4" style="color:#BFA181;">    (بین 69.81 و 75.41)       </small> </label>
                    <input type="number" step="0.01" class="form-control" id="Si" placeholder="" required>
                </div>
                <div class="form-group">
                    <label for="K" style="direction:rtl !important; text-align:justify; float:right">K: پتاسیم <small class="pr-4" style="color:#BFA181;">       (بین 0 و 6.21)       </small> </label>
                    <input type="number" step="0.01" class="form-control" id="K" placeholder="" required>
                </div>
                <div class="form-group">
                    <label for="Ca" style="direction:rtl !important; text-align:justify; float:right">Ca: کلیسیم <small class="pr-4" style="color:#BFA181;">    (بین 5.43 و 16.19)      </small> </label>
                    <input type="number" step="0.01" class="form-control" id="Ca" placeholder="" required>
                </div>
                <div class="form-group">
                    <label for="Ba" style="direction:rtl !important; text-align:justify; float:right">Ba: باریوم <small class="pr-4" style="color:#BFA181;">    (بین 0 و 3.15)       </small> </label>
                    <input type="number" step="0.01" class="form-control" id="Ba" placeholder="" required>
                </div>
                <div class="form-group">
                    <label for="Fe" style="direction:rtl !important; text-align:justify; float:right">Fe: آهن <small class="pr-4" style="color:#BFA181;">     (بین 0 و 0.51)       </small> </label>
                    <input type="number" step="0.01" class="form-control" id="Fe" placeholder="" required>
                </div>
                
                <button type="submit" value="Submit" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">ارسال</button>
            </form>
        </div>
        <div class="col-md-2"></div>
        
        
        <div class="col-md-12 mt-5">
            
            <h1 style="font-family: 'Sahel', 'Caveat Brush', cursive; color:#99775C; font-size:2.5rem" class="text-justify mt-4 mb-1">
                توضیحات مدل:
            </h1>
            
            <p style="font-size:1.3rem" class="text-justify">
                
                طبقه بندی یک روش یادگیری ماشینی نظارت شده است که در آن مدل سعی می کند برچسب صحیح یک داده ورودی داده شده را پیش بینی کند. یکی از الگوریتم هایی که برای طبقه بندی استفاده می شود، الگوریتم <a href="https://en.wikipedia.org/wiki/Random_forest" target="_blank">“Random Forest Classifier”</a> است. <br>
                در اینجا، ما از دیتاست <b style="color:#6E6E6E"><u>glass.csv</u></b>    برای اهداف طبقه بندی استفاده می کنیم و می توانید مجموعه داده را از لینک بالای این صفحه دانلود کنید. این مجموعه داده دارای 9 ویژگی است: <br>
                “<i style="color:#6ACFC7">RI</i>”, “<i style="color:#6ACFC7">Na</i>”, “<i style="color:#6ACFC7">Mg</i>”, “<i style="color:#6ACFC7">Al</i>”, “<i style="color:#6ACFC7">Si</i>”, “<i style="color:#6ACFC7">K</i>”, “<i style="color:#6ACFC7">Ca</i>”, “<i style="color:#6ACFC7">Ba</i>”, “<i style="color:#6ACFC7">Fe</i>” <br>
                و متغیر پیش بینی برای هر مورد در دیتاست، نوع شیشه است که دارای 6 مقدار است: <br>
                “<i style="color:#6ACFC7">Building Windows Float Processed</i>”, “<i style="color:#6ACFC7">Building Windows Non-Float Processed</i>”, “<i style="color:#6ACFC7">Vehicle Windows Float Processed</i>”, “<i style="color:#6ACFC7">Containers</i>”, “<i style="color:#6ACFC7">Tableware</i>”, “<i style="color:#6ACFC7">Headlamps</i>”. <br>
                در فرم بالا مقادیر 9 متغیر ویژگی که عمدتاً مقادیر عناصر شیمیایی است را وارد می کنید و مدل در یک فرم پاپ آپ نوع شیشه را برمی گرداند. Random Forest Classifier نسبت به مدل های دیگر برای محاسبه زمان بیشتری می برد و برای مشاهده نتایج به صورت پاپ آپ باید بیشتر منتظر بمانید.  <br>
                توجه داشته باشید که مقادیر و محدوده های هر متغیر ویژگی به شرح زیر است: <br>
                <span class="badge m-2 p-2" style="background-color: #213F99">   شاخص انعکاس (بین 1.51 و 1.53)   </span> <br>                                 
                <span class="badge m-2 p-2" style="background-color: #213F99"> سدیم (بین 10.73 و 17.38)   </span>    <br>
                <span class="badge m-2 p-2" style="background-color: #213F99">   منیزیم (بین 0 و 4.49)    </span> <br>
                <span class="badge m-2 p-2" style="background-color: #213F99">   آلومینیوم (بین 0.29 و 3.5)   </span> <br>
                <span class="badge m-2 p-2" style="background-color: #213F99">   سیلیسیوم (بین 69.81 و 75.41)   </span> <br>
                <span class="badge m-2 p-2" style="background-color: #213F99">   پتاسیم (بین 0 و 6.21)   </span> <br>
                <span class="badge m-2 p-2" style="background-color: #213F99">   کلیسیم (بین 5.43 و 16.19)   </span> <br>
                <span class="badge m-2 p-2" style="background-color: #213F99">   باریوم (بین 0 و 3.15)   </span> <br>
                <span class="badge m-2 p-2" style="background-color: #213F99">   آهن (بین 0 و 0.51)   </span> <br>
                کد نمونه مورد استفاده برای آموزش مدل طبقه بندی "جنگل تصادفی" در لینک بالای همین صفحه ارائه شده است. هر بار که این فرم را اجرا می کنید و پیش بینی های طبقه بندی اتفاق می افتد، مقادیر در پایگاه داده ذخیره می شوند و با لینک "نتایج" در بالای این صفحه، نتایج قبلی پیش بینی مدل را مشاهده خواهید کرد. اجرای اخیر شما به انتهای این لیست اضافه خواهد شد.
            
            </p>
            
        </div>
        
        
        
        
        
    </div>
</div>

<script>
    $(document).on('submit', '#post-form',function(e){
        e.preventDefault();
        $.ajax({
            type:'POST',
            url:'{% url "ml:submit_classification_rf" %}',  
            data:{
                RI:$('#RI').val(),
                Na:$('#Na').val(),
                Mg:$('#Mg').val(),
                Al:$('#Al').val(),
                Si:$('#Si').val(),
                K:$('#K').val(),
                Ca:$('#Ca').val(),
                Ba:$('#Ba').val(),
                Fe:$('#Fe').val(),
                csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
                action: 'post'
            },
            success:function(json) {
                document.forms["post-form"].reset();
                document.getElementById("prediction").innerHTML = json['result']
                document.getElementById("RI1").innerHTML = json['RI']
                document.getElementById("Na1").innerHTML = json['Na']
                document.getElementById("Mg1").innerHTML = json['Mg']
                document.getElementById("Al1").innerHTML = json['Al']
                document.getElementById("Si1").innerHTML = json['Si']
                document.getElementById("K1").innerHTML = json['K']
                document.getElementById("Ca1").innerHTML = json['Ca']
                document.getElementById("Ba1").innerHTML = json['Ba']
                document.getElementById("Fe1").innerHTML = json['Fe']
            },
            error : function(xhr,errmsg,err) {

            }
        });
    })
</script>

{% endblock %}

