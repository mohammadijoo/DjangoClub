{% extends "portfolio/base-2.html" %}

{% block cssStyle %}  
.lighttag {
  color: #e8f9fd !important;
}
{% endblock %}
{% block content %}
<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" style="direction:rtl !important; float:right; font-family: 'Sahel';">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header" style="direction:rtl !important; float:right">
                <h5 class="modal-title" id="exampleModalLabel" style="color:black; direction:rtl !important; float:right !important; font-family: 'Sahel'; text-align:justify;">  نتایج پیش بینی:  </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="direction:rtl !important; float:right; text-align:justify;">
                <h5 style="color:black; direction:rtl !important; float:right !important; font-family: 'Sahel'; text-align:justify;">  ورودی های طبقه بندی:  </h5><br><br>
                <div style="color:black; direction:rtl !important; float:right !important; text-align:justify;"> عرض جغرافیایی: <span id="la" style="color:black;"></span></div> <br>
                <div style="color:black; direction:rtl !important; float:right !important; text-align:justify;"> طول جغرافیایی: <span id="lo" style="color:black;"></span></div> <br>
                <div style="color:black; direction:rtl !important; float:right !important; text-align:justify;"> عمق: <span id="de" style="color:black;"></span></div> <br>
                <h5 class="pt-3" style="color:black; direction:rtl !important; float:right !important; text-align:justify; font-family: 'Sahel';">    نتیجه پیش بینی شدت زلزله:  </h5> <br>
                <div id="prediction" style="color:black;"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">بستن</button>
                <a class="btn btn-primary" href="{% url 'ml:regressionresultridgefa' %}" role="button">مشاهده نتایج قبلی </a>
            </div>
        </div>
    </div>
</div>

<!--<h1 ></h1>-->

<div class="container pt-3">
    <div class="row justify-content-md-center">
        <div class="col-md-12 ustify-content-md-center text-center">
            
            <span style="font-size:1.5rem; font-weight:600; " class="m-2 ">
                <a href="{% url 'ml:regressionresultridgefa' %}" target="_blank" style="border-bottom: 1px solid #ffb766;" class="lighttag"> 
                  نتایج   </a>
            </span> 
            
            <span style="font-size:1.5rem; font-weight:600; " class="m-2">
                <a href="https://github.com/mohammadijoo/Datasets/blob/main/iris.csv" target="_blank" style="border-bottom: 1px solid #ffb766;" class="lighttag"> 
                   کد نمونه  </a>
            </span>
            
            <span style="font-size:1.5rem; font-weight:600; " class="m-2">
                <a href="https://github.com/mohammadijoo/Datasets/blob/main/iris.csv" target="_blank" style="border-bottom: 1px solid #ffb766;" class="lighttag"> 
                  دیتاست   </a>
            </span> <br>
            
        </div>
        
        <div class="col-md-2"></div>
        <div class="col-md-8">
            
            <h1 style="font-family: 'Sahel', 'Caveat Brush', cursive; color:#A28089; font-size:3rem" class="text-center mt-4 mb-1">
                پیش بینی شدت زلزله
            </h1>
            <h1 style="font-family: 'Sahel', 'Caveat Brush', cursive; color:#A28089; font-size:2rem" class="text-center mb-4">
                با استغاده از مدل <u>Ridge Regression</u> 
            </h1>
            <h6 style="color: #00ABE4; font-size:0.8rem;" class="text-center mb-2">
                پس از تکمیل و ارسال فرم، حداقل 10 ثانیه صبر کنید تا مدل نتایج را محاسبه نموده و نمایش دهد. <br> همچنین، تمام اعداد اعشاری وارد شده باید حداکثر 2 رقم اعشار داشته باشند، مانند: 1.23
            </h6>
            <form action="" id="post-form">
                {% csrf_token %}
                <div class="form-group"> 
                    <label for="latitude" style="direction:rtl !important; text-align:justify; float:right"> عرض جغرافیایی <small class="pl-4" style="color:#BFA181;"> (بین 11- و 6)   </small> </label>  
                    <input type="number" step="0.01" class="form-control" id="latitude" placeholder="" required>
                </div>
                <div class="form-group">
                    <label for="longitude" style="direction:rtl !important; text-align:justify; float:right"> طول جغرافیایی <small class="pl-4" style="color:#BFA181;">  (بین 95 و 141)   </small> </label>  
                    <input type="number" step="0.01" class="form-control" id="longitude" placeholder="" required>
                </div>
                <div class="form-group">
                    <label for="depth" style="direction:rtl !important; text-align:justify; float:right"> عمق زلزله <small class="pl-4" style="color:#BFA181;">  (بین 1 و 750)   </small> </label>  
                    <input type="number" step="0.01" class="form-control" id="depth" placeholder="" required>
                </div>
                <button type="submit" value="Submit" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">ارسال</button>
            </form>
        </div>
        <div class="col-md-2"></div>
        
        
        <div class="col-md-12 mt-5">
            
            <h1 style="font-family: 'Sahel', 'Caveat Brush', cursive; color:#99775C; font-size:2.5rem" class="text-justify mt-4 mb-1">
                توضیحات مدل:
            </h1>
            
            <p style="font-size:1.3rem" class="text-justify">
                
                رگرسیون یک روش یادگیری ماشینی نظارت شده برای درک رابطه بین متغیرها یا ویژگی های مستقل و یک متغیر یا نتیجه وابسته است. یکی از الگوریتم هایی که برای رگرسیون استفاده می شود <a href="https://en.wikipedia.org/wiki/Ridge_regression" target="_blank">“Ridge Regression”</a> است. <br>
                در اینجا، ما از دیتاست <b style="color:#6E6E6E"><u>earthquake.csv</u></b>  برای اهداف رگرسیونی استفاده می کنیم و می توانید دیتاست را از لینک بالای همین صفحه دانلود کنید. این دیتاست دارای 3 متغیر ویژگی است: <br>
                “<i style="color:#6ACFC7">عرض جغرافیایی</i>”, “<i style="color:#6ACFC7">طول جغرافیایی</i>” و “<i style="color:#6ACFC7">عمق زلزله</i>” <br>
                و متغیر پیش بینی برابر است با: “<i style="color:#6ACFC7">شدت زلزله</i>”. <br>
                
                در فرم بالا مقادیر 3 متغیر ویژگی را وارد می کنید و مدل شدت زلزله را در یک فرم پاپ آپ برمی گرداند. توجه داشته باشید که مقادیر و محدوده های هر متغیر ویژگی به شرح زیر است:  <br>
            
            </p>
            
                <h5 class="mt-4 text-white text-right" style="font-family: 'Sahel', 'BTeraffic';"><mark class="mt-2 p-1">    عرض جغرافیایی (بین 11- و 6)   </mark> </h5>                                 
                <h5 class="mt-4 text-white text-right" style="font-family: 'Sahel', 'BTeraffic';"><mark class="mt-2 p-1">    طول جغرافیایی (بین 95 و 141)     </mark> </h5>
                <h5 class="mt-4 mb-4 text-white text-right" style="font-family: 'Sahel', 'BTeraffic';"><mark class="mt-2 p-1">   عمق زلزله (بین 1 و 750)    </mark> </h5>
                
            <p style="font-size:1.3rem" class="text-justify">
                
                نمونه کد مورد استفاده برای آموزش مدل “Ridge Regression” در لینک بالای همین صفحه ارائه شده است. هر بار که این فرم را اجرا می کنید و پیش بینی ها اتفاق می افتد، مقادیر در پایگاه داده ذخیره می شوند و با لینک "نتایج" در بالای این صفحه، نتایج قبلی پیش بینی مدل را مشاهده خواهید کرد. اجرای اخیر شما به انتهای این لیست اضافه خواهد شد.
            
            </p>
            
        </div>
        
        
        
        
        
    </div>
</div>

<script>
    $(document).on('submit', '#post-form',function(e){
        e.preventDefault();
        $.ajax({
            type:'POST',
            url:'{% url "ml:submit_regression_ridge" %}',
            data:{
                latitude:$('#latitude').val(),
                longitude:$('#longitude').val(),
                depth:$('#depth').val(),
                csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
                action: 'post'
            },
            success:function(json) {
                document.forms["post-form"].reset();
                document.getElementById("prediction").innerHTML = json['result']
                document.getElementById("la").innerHTML = json['latitude']
                document.getElementById("lo").innerHTML = json['longitude']
                document.getElementById("de").innerHTML = json['depth']
            },
            error : function(xhr,errmsg,err) {

            }
        });
    })
</script>

{% endblock %}

