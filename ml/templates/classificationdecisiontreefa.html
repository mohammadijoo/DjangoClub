{% extends "portfolio/base-2.html" %}

{% block cssStyle %}  
.lighttag {
  color: #e8f9fd !important;
}
{% endblock %}
{% block content %}
<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" style="direction:rtl !important; float:right; font-family: 'Sahel';">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header" style="direction:rtl !important; float:right">
                <h5 class="modal-title" id="exampleModalLabel" style="color:black; direction:rtl !important; float:right !important; font-family: 'Sahel'; text-align:justify;">  نتایج پیش بینی:  </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="direction:rtl !important; float:right; text-align:justify;">   
                <h5 style="color:black; direction:rtl !important; float:right !important; font-family: 'Sahel'; text-align:justify;">  ورودی های طبقه بندی:  </h5><br><br>
                <div style="color:black; direction:rtl !important; float:right !important; text-align:justify;"> وزن: <span id="we" style="color:black;"></span></div> <br>
                <div style="color:black; direction:rtl !important; float:right !important; text-align:justify;"> طول 1: <span id="le1" style="color:black;"></span></div> <br>
                <div style="color:black; direction:rtl !important; float:right !important; text-align:justify;"> طول 2: <span id="le2" style="color:black;"></span></div> <br>
                <div style="color:black; direction:rtl !important; float:right !important; text-align:justify;"> طول 3: <span id="le3" style="color:black;"></span></div> <br>
                <div style="color:black; direction:rtl !important; float:right !important; text-align:justify;"> ارتفاع: <span id="he" style="color:black;"></span></div> <br>
                <div style="color:black; direction:rtl !important; float:right !important; text-align:justify;"> عرض: <span id="wi" style="color:black;"></span></div>  <br>
                <h5 class="pt-3" style="color:black; direction:rtl !important; float:right !important; font-family: 'Sahel'; text-align:justify;">   نتیجه پیش بینی نوع ماهی: </h5>  <br>
                <div id="prediction" style="color:black;"></div>
            </div>
            <div class="modal-footer" style="direction:rtl !important; float:right">
                <button type="button" class="btn btn-secondary" data-dismiss="modal"> بستن  </button>
                <a class="btn btn-primary" href="{% url 'ml:classificationresultdtfa' %}" role="button">  مشاهده نتایج قبلی </a>
            </div>
        </div>
    </div>
</div>

<!--<h1 ></h1>-->

<div class="container pt-3" style="direction:rtl !important; font-family: 'Sahel', 'BTraffic' !important;">
    <div class="row justify-content-md-center">
        <div class="col-md-12 ustify-content-md-center text-center">
            
            <span style="font-size:1.5rem; font-weight:600; " class="m-2 ">
                <a href="{% url 'ml:classificationresultdtfa' %}" target="_blank" style="border-bottom: 1px solid #ffb766;" class="lighttag"> 
                    نتایج </a>
            </span> 
            
            <span style="font-size:1.5rem; font-weight:600; " class="m-2">
                <a href="https://github.com/mohammadijoo/Datasets/blob/main/fish.py" target="_blank" style="border-bottom: 1px solid #ffb766;" class="lighttag"> 
                    کد نمونه</a>
            </span>
            
            <span style="font-size:1.5rem; font-weight:600; " class="m-2">
                <a href="https://github.com/mohammadijoo/Datasets/blob/main/fish.csv" target="_blank" style="border-bottom: 1px solid #ffb766;" class="lighttag"> 
                    دیتاست</a>
            </span> <br>
            
        </div>
        
        <div class="col-md-2"></div>
        <div class="col-md-8">
            
            <h1 style="font-family: 'Sahel', 'Caveat Brush', cursive; color:#A28089; font-size:3rem" class="text-center mt-4 mb-1">
                طبقه بندی انواع ماهی
            </h1>
            <h1 style="font-family: 'Sahel', 'Caveat Brush', cursive; color:#A28089; font-size:2rem" class="text-center mb-4">
                با استفاده از مدل <u>Decision Tree</u> 
            </h1>
            <h6 style="color: #00ABE4; font-size:0.8rem;" class="text-center mb-2">
                پس از تکمیل و ارسال فرم، حداقل 10 ثانیه صبر کنید تا مدل نتایج را محاسبه نموده و نمایش دهد. <br> همچنین، تمام اعداد اعشاری وارد شده باید حداکثر 2 رقم اعشار داشته باشند، مانند: 1.23
            </h6>
            <form action="" id="post-form" style="direction:rtl !important; font-family: 'Sahel', 'BTraffic' !important;">
                {% csrf_token %}
                <div class="form-group" >  
                    <label for="Weight" style="direction:rtl !important; text-align:justify; float:right">وزن  <small class="pr-4 text-right" style="color:#BFA181;">  (بین 5 تا 1650 گرم)   </small></label>
                    <input type="number" step="0.01" class="form-control text-right" id="Weight" placeholder="" required>
                </div>
                <div class="form-group">
                    <label for="Length1" style="direction:rtl !important; text-align:justify; float:right"> طول 1: طول عمودی <small class="pr-4" style="color:#BFA181;">  (بین 7.5 تا 59 سانتی متر) </small></label>
                    <input type="number" step="0.01" class="form-control" id="Length1" placeholder="" required>
                </div>
                <div class="form-group">
                    <label for="Length2" style="direction:rtl !important; text-align:justify; float:right"> طول 2: طول قطری  <small class="pr-4" style="color:#BFA181;">  (بین 8.4 تا 63.4 سانتی متر) </small></label>
                    <input type="number" step="0.01" class="form-control" id="Length2" placeholder="" required>
                </div>
                <div class="form-group">
                    <label for="Length3" style="direction:rtl !important; text-align:justify; float:right">  طول 3: طول متقاطع  <small class="pr-4" style="color:#BFA181;"> (بین 8.8 تا 68 سانتی متر)    </small></label>
                    <input type="number" step="0.01" class="form-control" id="Length3" placeholder="" required>
                </div>
                <div class="form-group">
                    <label for="Height" style="direction:rtl !important; text-align:justify; float:right">  ارتفاع <small class="pr-4" style="color:#BFA181;"> (بین 1.72 تا 18.95 سانتی متر)     </small></label>
                    <input type="number" step="0.01" class="form-control" id="Height" placeholder="" required>
                </div>
                <div class="form-group">
                    <label for="Width" style="direction:rtl !important; text-align:justify; float:right">   عرض: عرض قطری   <small class="pr-4" style="color:#BFA181;">  (بین 1.04 و 8.14 سانتی متر)   </small></label>
                    <input type="number" step="0.01" class="form-control" id="Width" placeholder="" required>
                </div>
                <button type="submit" value="Submit" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal"> ارسال  </button>
            </form>
        </div>
        <div class="col-md-2"></div>
        
        
        <div class="col-md-12 mt-5">
            
            <h1 style="font-family: 'Sahel', 'Caveat Brush', cursive; color:#99775C; font-size:2.5rem" class="text-justify mt-4 mb-1">
                توضیحات مدل:
            </h1>
            
            <p style="font-size:1.3rem" class="text-justify">
                
                طبقه بندی یک روش یادگیری ماشینی نظارت شده است که در آن مدل سعی می کند برچسب صحیح یک داده ورودی داده شده را پیش بینی کند.
                 یکی از الگوریتم‌هایی که برای طبقه‌بندی استفاده می‌شود، <a href="https://en.wikipedia.org/wiki/Decision_tree_learning" target="_blank">«Decision Tree Classifier»</a> است.  <br>
                 
                 در اینجا، ما از دیتاست <b style="color:#6E6E6E"><u>fish.csv</u></b> برای اهداف طبقه بندی استفاده می کنیم و می توانید این دیتاست را از لینک بالای این صفحه دانلود کنید.  <br>

                این مجموعه داده دارای 6 متغیر است:  <br>
                
                “<i style="color:#6ACFC7"> وزن </i>”, “<i style="color:#6ACFC7">  طول 1: طول عمودی </i>”, “<i style="color:#6ACFC7">  طول 2: طول قطری  </i>”, “<i style="color:#6ACFC7">  طول 3: طول متقاطع   </i>”, “<i style="color:#6ACFC7">  ارتفاع  </i>” و “<i style="color:#6ACFC7">   عرض: عرض مورب  </i>” <br>
                
                و متغیر طبقه بندی برای هر مورد در دیتاست، نوع ماهی است که دارای 7 مقدار است: <br>
                
                “<i style="color:#6ACFC7">Bream</i>”, “<i style="color:#6ACFC7">Roach</i>”, “<i style="color:#6ACFC7">Whitefish</i>”, “<i style="color:#6ACFC7">Parkki</i>”, “<i style="color:#6ACFC7">Perch</i>”, “<i style="color:#6ACFC7">Pike</i>”, “<i style="color:#6ACFC7">Smelt</i>”. <br>
                
                
                در فرم بالا مقادیر 6 متغیر ویژگی را وارد می کنید و مدل در یک فرم پاپ آپ نوع ماهی را برمی گرداند. توجه داشته باشید که مقادیر و محدوده های هر متغیر ویژگی به شرح زیر است:  <br>
             
                <span class="badge m-2 p-2" style="background-color: #213F99"> وزن (گرم): بین 5 و 1650  </span> <br>                                 
                <span class="badge m-2 p-2" style="background-color: #213F99">  طول 1: طول عمودی (بین 7.5 تا 59 سانتی متر)  </span> <br>
                <span class="badge m-2 p-2" style="background-color: #213F99">   طول 2: طول قطری (بین 8.4 تا 63.4 سانتی متر)   </span> <br>
                <span class="badge m-2 p-2" style="background-color: #213F99">  طول 3: طول متقاطع (بین 8.8 تا 68 سانتی متر)  </span> <br>
                <span class="badge m-2 p-2" style="background-color: #213F99">  ارتفاع: (بین 1.72 تا 18.95 سانتی متر)  </span> <br>
                <span class="badge m-2 p-2" style="background-color: #213F99">   عرض: عرض قطری (بین 1.04 و 8.14 سانتی متر)   </span> <br>
                
                کد نمونه مورد استفاده برای آموزش مدل طبقه بندی «درخت تصمیم» در لینک بالای این صفحه ارائه شده است. هر بار که این فرم را اجرا می کنید و پیش بینی های طبقه بندی اتفاق می افتد، مقادیر در پایگاه داده ذخیره می شوند و با لینک "نتایج" در بالای این صفحه، نتایج قبلی پیش بینی مدل را مشاهده خواهید کرد. اجرای اخیر شما به انتهای این لیست اضافه خواهد شد.
            
            </p>
            
        </div>
        
        
        
        
        
    </div>
</div>

<script>
    $(document).on('submit', '#post-form',function(e){
        e.preventDefault();
        $.ajax({
            type:'POST',
            url:'{% url "ml:submit_classification_dt" %}', 
            data:{
                Weight:$('#Weight').val(),
                Length1:$('#Length1').val(),
                Length2:$('#Length2').val(),
                Length3:$('#Length3').val(),
                Height:$('#Height').val(),
                Width:$('#Width').val(),
                csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
                action: 'post'
            },
            success:function(json) {
                document.forms["post-form"].reset();
                document.getElementById("prediction").innerHTML = json['result']
                document.getElementById("we").innerHTML = json['Weight']
                document.getElementById("le1").innerHTML = json['Length1']
                document.getElementById("le2").innerHTML = json['Length2']
                document.getElementById("le3").innerHTML = json['Length3']
                document.getElementById("he").innerHTML = json['Height']
                document.getElementById("wi").innerHTML = json['Width']
            },
            error : function(xhr,errmsg,err) {

            }
        });
    })
</script>

{% endblock %}

